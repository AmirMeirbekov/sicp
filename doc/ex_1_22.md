# [Глава 1](./index.md#Глава-1-Построение-абстракций-с-помощью-процедур)

### Упражнение 1.22
Напишите процедуру `search-for-primes`, которая проверяет на простоту все нечетные числа в заданном диапазоне. С помощью этой процедуры найдите наименьшие три простых числа после 1000; после 10 000; после 100 000; после 1 000 000. Посмотрите, сколько времени затрачивается на каждое простое число. Поскольку алгоритм проверки имеет порядок роста Θ(√n), Вам следовало бы ожидать, что проверка на простоту чисел, близких к 10 000, **занимает в 10 раз больше времени**, чем для чисел, близких к 1000.
- Подтверждают ли это Ваши замеры времени?
- Хорошо ли поддерживают предсказание √n данные для 100 000 и 1 000 000?
- Совместим ли Ваш результат с предположением, что программы на Вашей машине затрачивают на выполнение задач время, пропорциональное числу шагов?

#### Решение
Функция `avg-time-ratio` принимает на вход количество искомых чисел _n_ и коллекцию начальных значений _k₀_.._kₘ_ от которых будет вестись поиск простых чисел. От каждого начального значения _kᵢ_ ведется поиск _n_ первых простых чисел и замеряется время поиска для каждого найденного числа _t_(_kᵢ_,0).._t_(_kᵢ_,n), затем вычисляется среднее время поиска _n_ первых простых чисел от каждого стартового значения **_t_ᵢ = Σ(_t_(_kᵢ_,0).._t_(_kᵢ_,n)) / n**. Далее вычисляется среднее соотношение каждого среднего времени поиска от каждого начального значения: **_t_ = Σ(_t_₁/_t_₀.._t_ₘ/_t_ₘ₋₁) / (m - 1)**

[Code](../src/sicp/chapter01/1_22.clj) | [Test](../test/sicp/chapter01/1_22_test.clj)
