# [Глава 2](../index.md#Глава-2-Построение-абстракций-с-помощью-данных)

### Упражнение 2.7
Лиза постулирует существование абстрактного объекта, называемого «интервал», у которого есть два конца: верхняя и нижняя границы. Кроме того, она предполагает, что имея два конца интервала, мы можем сконструировать его при помощи конструктора `make-interval`. Сначала Лиза пишет процедуру сложения двух интервалов. Она рассуждает так: минимальное возможное значение суммы равно сумме нижних границ интервалов, а максимальное возможное значение сумме верхних границ интервалов.

```clojure
(defn add-interval
  [a b]
  (make-interval (+ (lower-bound a)
                    (lower-bound b))
                 (+ (upper-bound a)
                    (upper-bound b))))
```

Кроме того, она вычисляет произведение двух интервалов путем нахождения минимума и максимума произведений концов интервалов и использования в качестве границ интервала-результата. (`min` и `max` — примитивы, которые находят минимум и максимум при любом количестве аргументов.)

```clojure
(defn mul-interval [a b]
  (let [p1 (* (lower-bound a) (lower-bound b))
        p2 (* (lower-bound a) (upper-bound b))
        p3 (* (upper-bound a) (lower-bound b))
        p4 (* (upper-bound a) (upper-bound b))]
    (make-interval (min p1 p2 p3 p4)
                   (max p1 p2 p3 p4))))
```

При делении двух интервалов Лиза умножает первый из них на интервал, обратный второму. Заметим, что границами обратного интервала являются числа, обратные верхнейи нижней границе исходного интервала, именно в таком порядке.

```clojure
(defn div-interval
  [a b]
  (mul-interval a
                (make-interval (/ 1.0 (upper-bound b))
                               (/ 1.0 (lower-bound b)))))
```

Программа Лизы неполна, поскольку она не определила, как реализуется абстракция интервала. Вот определение конструктора интервала:

```clojure
(defn make-interval
  [a b]
  (vector a b))
```

Завершите реализацию, определив селекторы `upper-bound` и `lower-bound`.

#### Решение
[Code](../../src/sicp/chapter02/2_07.clj) | [Test](../../test/sicp/chapter02/2_07_test.clj)
